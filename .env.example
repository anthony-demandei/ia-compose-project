# =============================================================================
# IA COMPOSE API - Environment Configuration (Active)
# =============================================================================

# =============================================================================
# CORE APPLICATION SETTINGS
# =============================================================================
ENVIRONMENT=development
DEBUG=false
HOST=0.0.0.0
PORT=8001

# =============================================================================
# AUTHENTICATION & SECURITY
# =============================================================================
DEMANDEI_API_KEY=your_demandei_api_key_here

# =============================================================================
# AI CONFIGURATION - GOOGLE GEMINI
# =============================================================================
GEMINI_API_KEY=your_gemini_api_key_here

# Primary, Fallback, and Last Resort Model Configuration
GEMINI_PRIMARY_MODEL=gemini-1.5-pro
GEMINI_FALLBACK_MODEL=gemini-1.5-flash
GEMINI_LAST_RESORT_MODEL=gemini-2.0-flash-exp

# Legacy model field for backward compatibility
GEMINI_MODEL=gemini-1.5-pro

# =============================================================================
# DOCUMENT GENERATION SETTINGS
# =============================================================================
DOC_MIN_LINES_PER_STACK=500
DOC_MAX_GENERATION_ATTEMPTS=3
DOC_GENERATION_TEMPERATURE=0.8
DOC_GENERATION_MAX_TOKENS=8000

# =============================================================================
# QUESTION ENGINE SETTINGS
# =============================================================================
QUESTION_MAX_PER_SELECTION=15
QUESTION_SIMILARITY_THRESHOLD=0.7
QUESTION_CACHE_TTL_SECONDS=3600
QUESTION_GENERATION_TEMPERATURE=0.5
QUESTION_GENERATION_MAX_TOKENS=2048

# =============================================================================
# REDIS CACHE CONFIGURATION
# =============================================================================
ENABLE_REDIS_CACHE=true  # Redis service included in docker-compose

# Redis connection settings (Docker setup)
REDIS_HOST=redis  # Use 'redis' hostname in Docker
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=
REDIS_USERNAME=

# Redis URL alternative (leave empty to use individual settings above)
REDIS_URL=

# Redis SSL Configuration (disabled for local development)
REDIS_SSL=false
REDIS_SSL_CERT_REQS=required
REDIS_SSL_CA_CERTS=
REDIS_SSL_CERTFILE=
REDIS_SSL_KEYFILE=

# Redis Connection Pool Settings
REDIS_MAX_CONNECTIONS=10
REDIS_RETRY_ON_TIMEOUT=true
REDIS_HEALTH_CHECK_INTERVAL=30
REDIS_CONNECTION_TIMEOUT=5
REDIS_SOCKET_TIMEOUT=5

# Cache TTL settings (in seconds)
REDIS_TTL_QUESTIONS=3600   # 1 hour for questions
REDIS_TTL_DOCUMENTS=86400  # 24 hours for documents  
REDIS_TTL_SESSIONS=7200    # 2 hours for sessions

# Redis Fallback Configuration
REDIS_ENABLE_FALLBACK=true
REDIS_FALLBACK_TIMEOUT=2

# =============================================================================
# STORAGE CONFIGURATION
# =============================================================================
USE_LOCAL_STORAGE=true
LOCAL_STORAGE_PATH=./storage
LOCAL_DOCUMENTS_PATH=./storage/documents
LOCAL_SESSIONS_PATH=./storage/sessions

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================
LOG_LEVEL=INFO
ENABLE_PII_SAFE_LOGGING=true

# =============================================================================
# SESSION MANAGEMENT
# =============================================================================
MAX_SESSION_DURATION=3600
SESSION_CLEANUP_INTERVAL=300

# =============================================================================
# API CONFIGURATION
# =============================================================================
MAX_REQUEST_SIZE=10485760
REQUEST_TIMEOUT=120

# =============================================================================
# PERFORMANCE SETTINGS
# =============================================================================
ENABLE_RESPONSE_COMPRESSION=true
ENABLE_REQUEST_VALIDATION=true
MAX_CONCURRENT_REQUESTS=100

# =============================================================================
# DEVELOPMENT SETTINGS
# =============================================================================
DEV_AUTO_RELOAD=false  # Disable in production
DEV_DETAILED_ERRORS=false  # Disable in production
DEV_LOG_REQUESTS=false
